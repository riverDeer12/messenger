<ion-header>
  <ion-toolbar color="primary">
    <ion-title class="header-title">My Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="errorLoadingProfile">
  Error during profile update.
</ion-content>

<ion-content fullscreen *ngIf="!editMode">
  <ion-grid *ngIf="loadingData">
    <ion-row>
      <ion-col size="5"></ion-col>
      <ion-col size="3">
        <ion-spinner name="dots"></ion-spinner>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-list *ngIf="!loadingData">
    <ion-item class="details-item">
      <ion-label class="details-item-label">Firstname: </ion-label>
      {{ user.firstName }}
    </ion-item>
    <ion-item class="details-item">
      <ion-label class="details-item-label">Lastname: </ion-label>
      {{ user.lastName }}
    </ion-item>
    <ion-item class="details-item">
      <ion-label class="details-item-label">Username: </ion-label>
      {{ user.userName }}
    </ion-item>
    <ion-item class="details-item">
      <ion-label class="details-item-label">Email: </ion-label>
      {{ user.email }}
    </ion-item>
    <ion-item class="details-item">
      <ion-label class="details-item-label">Active chats: </ion-label>
      {{ user.activeChats }}
    </ion-item>
    <ion-item class="details-item">
      <ion-label class="details-item-label">Messages sent: </ion-label>
      {{ user.messagesSent }}
    </ion-item>
    <ion-button (click)="openEditMode()" class="button">
      <ion-icon name="pencil-outline"></ion-icon>
    </ion-button>
  </ion-list>  
</ion-content>

<ion-content fullscreen *ngIf="editMode">
  <ion-grid *ngIf="loadingData">
    <ion-row>
      <ion-col size="5"></ion-col>
      <ion-col size="3">
        <ion-spinner name="dots"></ion-spinner>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-list *ngIf="!loadingData">
    <form [formGroup]="profileDetailsForm" autocomplete="off" (submit)="updateProfileDetails(profileDetailsForm)">
      <ion-item class="details-item">
        <ion-label class="details-item-label">Firstname: </ion-label>
        <ion-input class="details-item-label" type="text" placeholder="Enter your first name here..."  formControlName="firstName"></ion-input>
      </ion-item>
      <ion-item class="details-item">
        <ion-label class="details-item-label">Lastname: </ion-label>
        <ion-input class="details-item-label" type="text" placeholder="Enter your last name here..."  formControlName="lastName"></ion-input>
      </ion-item>      
      <ion-item class="details-item">
        <ion-label class="details-item-label">Username: </ion-label>
        <ion-input class="details-item-label" type="text" placeholder="Enter your username here..."  formControlName="userName"></ion-input>
      </ion-item>      
      <ion-item class="details-item">
        <ion-label class="details-item-label">Email: </ion-label>
        <ion-input class="details-item-label" type="text" placeholder="Enter your email here..."  formControlName="email"></ion-input>
      </ion-item>
      <ion-button class="button" type="submit" color="primary" fill="solid" 
      [disabled]="profileDetailsForm.invalid">
        <ion-icon name="checkmark-outline"></ion-icon>
      </ion-button>
      <ion-button class="button" (click)="closeEditMode()" type="button" color="warning" fill="solid">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </form>
  </ion-list>  
</ion-content>

<navigation-tabs></navigation-tabs>